<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Ribasim – index</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../core/equations.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../assets/styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="https://user-images.githubusercontent.com/4471859/224825908-bee7e044-bc6b-4561-8b08-5d330cce3ed5.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Ribasim</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../core/index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Julia core</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../python/index.html" rel="" target="">
 <span class="menu-text">Python tooling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../qgis/index.html" rel="" target="">
 <span class="menu-text">QGIS plugin</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../couple/index.html" rel="" target="">
 <span class="menu-text">Coupled models</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../contribute/index.html" rel="" target="">
 <span class="menu-text">Contributing</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Deltares/Ribasim" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../build/index.html">API Reference</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../core/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Julia core</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../core/usage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Usage</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../core/equations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Equations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../build/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">API Reference</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#api-reference" id="toc-api-reference" class="nav-link active" data-scroll-target="#api-reference"><span class="header-section-number">1</span> API Reference</a>
  <ul class="collapse">
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">1.1</span> Functions</a></li>
  <li><a href="#types" id="toc-types" class="nav-link" data-scroll-target="#types"><span class="header-section-number">1.2</span> Types</a></li>
  <li><a href="#index" id="toc-index" class="nav-link" data-scroll-target="#index"><span class="header-section-number">1.3</span> Index</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<p><a id="API-Reference"></a></p>
<p><a id="API-Reference-1"></a></p>
<section id="api-reference" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> API Reference</h1>
<p><em>This is the private internal documentation of the Ribasim API.</em></p>
<ul>
<li><a href="../build/index.html#API-Reference">API Reference</a>
<ul>
<li><a href="../build/index.html#Functions">Functions</a></li>
<li><a href="../build/index.html#Types">Types</a></li>
<li><a href="../build/index.html#Index">Index</a></li>
</ul></li>
</ul>
<p><a id="Functions"></a></p>
<p><a id="Functions-1"></a></p>
<section id="functions" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="functions"><span class="header-section-number">1.1</span> Functions</h2>
<p><a id="Ribasim.basin_bottom-Tuple{Ribasim.Basin, Int64}" href="#Ribasim.basin_bottom-Tuple{Ribasim.Basin, Int64}">#</a> <strong><code>Ribasim.basin_bottom</code></strong> — <em>Method</em>.</p>
<p>Return the bottom elevation of the basin with index i, or nothing if it doesn’t exist</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL302" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.basin_bottoms-Tuple{Ribasim.Basin, Int64, Int64, Int64}" href="#Ribasim.basin_bottoms-Tuple{Ribasim.Basin, Int64, Int64, Int64}">#</a> <strong><code>Ribasim.basin_bottoms</code></strong> — <em>Method</em>.</p>
<p>Get the bottom on both ends of a node. If only one has a bottom, use that for both.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL316" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.create_callbacks-Tuple{Any}" href="#Ribasim.create_callbacks-Tuple{Any}">#</a> <strong><code>Ribasim.create_callbacks</code></strong> — <em>Method</em>.</p>
<p>Create the different callbacks that are used to store output and feed the simulation with new data. The different callbacks are combined to a CallbackSet that goes to the integrator. Returns the CallbackSet and the SavedValues for flow.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL114-L119" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.create_graph-Tuple{SQLite.DB, String}" href="#Ribasim.create_graph-Tuple{SQLite.DB, String}">#</a> <strong><code>Ribasim.create_graph</code></strong> — <em>Method</em>.</p>
<p>Return a directed graph, and a mapping from source and target nodes to edge fid.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL1" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.create_storage_tables-Tuple{SQLite.DB, Ribasim.config.Config}" href="#Ribasim.create_storage_tables-Tuple{SQLite.DB, Ribasim.config.Config}">#</a> <strong><code>Ribasim.create_storage_tables</code></strong> — <em>Method</em>.</p>
<p>Read the Basin / profile table and return all area and level and computed storage values</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL37" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.datetime_since-Tuple{Real, Dates.DateTime}" href="#Ribasim.datetime_since-Tuple{Real, Dates.DateTime}">#</a> <strong><code>Ribasim.datetime_since</code></strong> — <em>Method</em>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datetime_since</span>(t<span class="op">::</span><span class="dt">Real</span>, t0<span class="op">::</span><span class="dt">DateTime</span>)<span class="op">::</span><span class="dt">DateTime</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Convert a Real that represents the seconds passed since the simulation start to the nearest DateTime. This is used to convert between the solver’s inner float time, and the calendar.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/io.jl#LL26-L31" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.discrete_control_affect!-Tuple{Any, Any}" href="#Ribasim.discrete_control_affect!-Tuple{Any, Any}">#</a> <strong><code>Ribasim.discrete_control_affect!</code></strong> — <em>Method</em>.</p>
<p>Change parameters based on the control logic.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL240-L242" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.discrete_control_affect_downcrossing!-Tuple{Any, Any}" href="#Ribasim.discrete_control_affect_downcrossing!-Tuple{Any, Any}">#</a> <strong><code>Ribasim.discrete_control_affect_downcrossing!</code></strong> — <em>Method</em>.</p>
<p>An downcrossing means that a condition (always greater than) becomes false.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL230-L232" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.discrete_control_affect_upcrossing!-Tuple{Any, Any}" href="#Ribasim.discrete_control_affect_upcrossing!-Tuple{Any, Any}">#</a> <strong><code>Ribasim.discrete_control_affect_upcrossing!</code></strong> — <em>Method</em>.</p>
<p>An upcrossing means that a condition (always greater than) becomes true.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL220-L222" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.discrete_control_condition-NTuple{4, Any}" href="#Ribasim.discrete_control_condition-NTuple{4, Any}">#</a> <strong><code>Ribasim.discrete_control_condition</code></strong> — <em>Method</em>.</p>
<p>Listens for changes in condition truths.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL165-L167" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.expand_logic_mapping-Tuple{Dict{Tuple{Int64, String}, String}}" href="#Ribasim.expand_logic_mapping-Tuple{Dict{Tuple{Int64, String}, String}}">#</a> <strong><code>Ribasim.expand_logic_mapping</code></strong> — <em>Method</em>.</p>
<p>Replace the truth states in the logic mapping which contain wildcards with all possible explicit truth states.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL346-L349" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.findlastgroup-Tuple{Int64, AbstractVector{Int64}}" href="#Ribasim.findlastgroup-Tuple{Int64, AbstractVector{Int64}}">#</a> <strong><code>Ribasim.findlastgroup</code></strong> — <em>Method</em>.</p>
<p>For an element <code>id</code> and a vector of elements <code>ids</code>, get the range of indices of the last consecutive block of <code>id</code>. Returns the empty range <code>1:0</code> if <code>id</code> is not in <code>ids</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#                         1 2 3 4 5 6 7 8 9</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>Ribasim.<span class="fu">findlastgroup</span>(<span class="fl">2</span>, [<span class="fl">5</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">5</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">1</span>])</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># output</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fl">6</span><span class="op">:</span><span class="fl">8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL138-L149" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.findsorted-Tuple{Any, Any}" href="#Ribasim.findsorted-Tuple{Any, Any}">#</a> <strong><code>Ribasim.findsorted</code></strong> — <em>Method</em>.</p>
<p>Find the index of element x in a sorted collection a. Returns the index of x if it exists, or nothing if it doesn’t. If x occurs more than once, throw an error.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL185-L189" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.formulate!-Tuple{AbstractVector{Float64}, Ribasim.Basin, AbstractVector{Float64}, Real}" href="#Ribasim.formulate!-Tuple{AbstractVector{Float64}, Ribasim.Basin, AbstractVector{Float64}, Real}">#</a> <strong><code>Ribasim.formulate!</code></strong> — <em>Method</em>.</p>
<p>Linearize the evaporation flux when at small water depths Currently at less than 0.1 m.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL404-L407" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.formulate!-Tuple{Ribasim.LinearResistance, Ribasim.Parameters}" href="#Ribasim.formulate!-Tuple{Ribasim.LinearResistance, Ribasim.Parameters}">#</a> <strong><code>Ribasim.formulate!</code></strong> — <em>Method</em>.</p>
<p>Directed graph: outflow is positive!</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL513-L515" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.formulate!-Tuple{Ribasim.ManningResistance, Ribasim.Parameters}" href="#Ribasim.formulate!-Tuple{Ribasim.ManningResistance, Ribasim.Parameters}">#</a> <strong><code>Ribasim.formulate!</code></strong> — <em>Method</em>.</p>
<p>Conservation of energy for two basins, a and b:</p>
<pre><code>h_a + v_a^2 / (2 * g) = h_b + v_b^2 / (2 * g) + S_f * L + C / 2 * g * (v_b^2 - v_a^2)</code></pre>
<p>Where:</p>
<ul>
<li>h<em>a, h</em>b are the heads at basin a and b.</li>
<li>v<em>a, v</em>b are the velocities at basin a and b.</li>
<li>g is the gravitational constant.</li>
<li>S_f is the friction slope.</li>
<li>C is an expansion or extraction coefficient.</li>
</ul>
<p>We assume velocity differences are negligible (v<em>a = v</em>b):</p>
<pre><code>h_a = h_b + S_f * L</code></pre>
<p>The friction losses are approximated by the Gauckler-Manning formula:</p>
<pre><code>Q = A * (1 / n) * R_h^(2/3) * S_f^(1/2)</code></pre>
<p>Where:</p>
<ul>
<li>Where A is the cross-sectional area.</li>
<li>V is the cross-sectional average velocity.</li>
<li>n is the Gauckler-Manning coefficient.</li>
<li>R_h is the hydraulic radius.</li>
<li>S_f is the friction slope.</li>
</ul>
<p>The hydraulic radius is defined as:</p>
<pre><code>R_h = A / P</code></pre>
<p>Where P is the wetted perimeter.</p>
<p>The “upstream” water depth is used to compute cross-sectional area and hydraulic radius. This ensures that a basin can receive water after it has gone dry.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL561-L599" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.formulate!-Tuple{Ribasim.TabulatedRatingCurve, Ribasim.Parameters}" href="#Ribasim.formulate!-Tuple{Ribasim.TabulatedRatingCurve, Ribasim.Parameters}">#</a> <strong><code>Ribasim.formulate!</code></strong> — <em>Method</em>.</p>
<p>Directed graph: outflow is positive!</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL536-L538" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.get_compressor-Tuple{Ribasim.config.Config}" href="#Ribasim.get_compressor-Tuple{Ribasim.config.Config}">#</a> <strong><code>Ribasim.get_compressor</code></strong> — <em>Method</em>.</p>
<p>Get the compressor based on the Config</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL333" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.get_fractional_flow_connected_basins-Tuple{Int64, Ribasim.Basin, Ribasim.FractionalFlow, Graphs.SimpleGraphs.SimpleDiGraph{Int64}}" href="#Ribasim.get_fractional_flow_connected_basins-Tuple{Int64, Ribasim.Basin, Ribasim.FractionalFlow, Graphs.SimpleGraphs.SimpleDiGraph{Int64}}">#</a> <strong><code>Ribasim.get_fractional_flow_connected_basins</code></strong> — <em>Method</em>.</p>
<p>Get the state index of the basins that are connected to a node of given id via fractional flow.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL563-L565" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.get_jac_prototype-Tuple{Ribasim.Parameters}" href="#Ribasim.get_jac_prototype-Tuple{Ribasim.Parameters}">#</a> <strong><code>Ribasim.get_jac_prototype</code></strong> — <em>Method</em>.</p>
<p>Get a sparse matrix whose sparsity matches the sparsity of the Jacobian of the ODE problem. All nodes are taken into consideration, also the ones that are inactive.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL404-L408" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.get_level-Tuple{Ribasim.Parameters, Int64}" href="#Ribasim.get_level-Tuple{Ribasim.Parameters, Int64}">#</a> <strong><code>Ribasim.get_level</code></strong> — <em>Method</em>.</p>
<p>Get the current water level of a node ID. The ID can belong to either a Basin or a LevelBoundary.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL277-L280" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.get_storages_and_levels-Tuple{Ribasim.Model}" href="#Ribasim.get_storages_and_levels-Tuple{Ribasim.Model}">#</a> <strong><code>Ribasim.get_storages_and_levels</code></strong> — <em>Method</em>.</p>
<p>Get the storage and level of all basins as matrices of nbasin × ntime</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/io.jl#LL127" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.get_tstops-Tuple{Any, Dates.DateTime}" href="#Ribasim.get_tstops-Tuple{Any, Dates.DateTime}">#</a> <strong><code>Ribasim.get_tstops</code></strong> — <em>Method</em>.</p>
<p>From an iterable of DateTimes, find the times the solver needs to stop</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL271" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.get_value-Tuple{Ribasim.Parameters, Int64, String, Any}" href="#Ribasim.get_value-Tuple{Ribasim.Parameters, Int64, String, Any}">#</a> <strong><code>Ribasim.get_value</code></strong> — <em>Method</em>.</p>
<p>Get a value for a condition. Currently supports getting levels from basins and flows from flow edges.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL185-L188" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.id_index-Tuple{Dictionaries.Indices{Int64}, Int64}" href="#Ribasim.id_index-Tuple{Dictionaries.Indices{Int64}, Int64}">#</a> <strong><code>Ribasim.id_index</code></strong> — <em>Method</em>.</p>
<p>Get the index of an ID in a set of indices.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL294" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.input_path-Tuple{Ribasim.config.Config, String}" href="#Ribasim.input_path-Tuple{Ribasim.config.Config, String}">#</a> <strong><code>Ribasim.input_path</code></strong> — <em>Method</em>.</p>
<p>Construct a path relative to both the TOML directory and the optional <code>input_dir</code></p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/io.jl#LL112" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.load_data-Tuple{SQLite.DB, Ribasim.config.Config, Type{<:Legolas.AbstractRecord}}" href="#Ribasim.load_data-Tuple{SQLite.DB, Ribasim.config.Config, Type{<:Legolas.AbstractRecord}}">#</a> <strong><code>Ribasim.load_data</code></strong> — <em>Method</em>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load_data</span>(db<span class="op">::</span><span class="dt">DB</span>, config<span class="op">::</span><span class="dt">Config</span>, nodetype<span class="op">::</span><span class="dt">Symbol</span>, kind<span class="op">::</span><span class="dt">Symbol</span>)<span class="op">::</span><span class="dt">Union{Table, Query, Nothing}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Load data from Arrow files if available, otherwise the GeoPackage. Returns either an <code>Arrow.Table</code>, <code>SQLite.Query</code> or <code>nothing</code> if the data is not present.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/io.jl#LL34-L39" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.load_structvector-Union{Tuple{T}, Tuple{SQLite.DB, Ribasim.config.Config, Type{T}}} where T<:Tables.AbstractRow" href="#Ribasim.load_structvector-Union{Tuple{T}, Tuple{SQLite.DB, Ribasim.config.Config, Type{T}}} where T<:Tables.AbstractRow">#</a> <strong><code>Ribasim.load_structvector</code></strong> — <em>Method</em>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load_structvector</span>(db<span class="op">::</span><span class="dt">DB</span>, config<span class="op">::</span><span class="dt">Config</span>, <span class="op">::</span><span class="dt">Type{T}</span>)<span class="op">::</span><span class="dt">StructVector{T}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Load data from Arrow files if available, otherwise the GeoPackage. Always returns a StructVector of the given struct type T, which is empty if the table is not found. This function validates the schema, and enforces the required sort order.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/io.jl#LL65-L71" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.nodefields-Tuple{Ribasim.Parameters}" href="#Ribasim.nodefields-Tuple{Ribasim.Parameters}">#</a> <strong><code>Ribasim.nodefields</code></strong> — <em>Method</em>.</p>
<p>Get all node fieldnames of the parameter object.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL398" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.nodetype-Union{Tuple{Legolas.SchemaVersion{T, N}}, Tuple{N}, Tuple{T}} where {T, N}" href="#Ribasim.nodetype-Union{Tuple{Legolas.SchemaVersion{T, N}}, Tuple{N}, Tuple{T}} where {T, N}">#</a> <strong><code>Ribasim.nodetype</code></strong> — <em>Method</em>.</p>
<p>From a SchemaVersion(“ribasim.flowboundary.static”, 1) return (:FlowBoundary, :static)</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/validation.jl#LL29-L31" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.output_path-Tuple{Ribasim.config.Config, String}" href="#Ribasim.output_path-Tuple{Ribasim.config.Config, String}">#</a> <strong><code>Ribasim.output_path</code></strong> — <em>Method</em>.</p>
<p>Construct a path relative to both the TOML directory and the optional <code>output_dir</code></p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/io.jl#LL117" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.parsefile-Tuple{AbstractString}" href="#Ribasim.parsefile-Tuple{AbstractString}">#</a> <strong><code>Ribasim.parsefile</code></strong> — <em>Method</em>.</p>
<p>Parse a TOML file to a Config</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/io.jl#LL122" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.profile_storage-Tuple{Vector{Float64}, Vector{Float64}}" href="#Ribasim.profile_storage-Tuple{Vector{Float64}, Vector{Float64}}">#</a> <strong><code>Ribasim.profile_storage</code></strong> — <em>Method</em>.</p>
<p>Calculate a profile storage by integrating the areas over the levels</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL22" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.qh_interpolation-Tuple{Int64, StructArrays.StructVector}" href="#Ribasim.qh_interpolation-Tuple{Int64, StructArrays.StructVector}">#</a> <strong><code>Ribasim.qh_interpolation</code></strong> — <em>Method</em>.</p>
<p>From a table with columns node<em>id, discharge (Q) and level (h), create a LinearInterpolation from level to discharge for a given node</em>id.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL172-L175" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.save_flow-Tuple{Any, Any, Any}" href="#Ribasim.save_flow-Tuple{Any, Any, Any}">#</a> <strong><code>Ribasim.save_flow</code></strong> — <em>Method</em>.</p>
<p>Copy the current flow to the SavedValues</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL299" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.seconds_since-Tuple{Dates.DateTime, Dates.DateTime}" href="#Ribasim.seconds_since-Tuple{Dates.DateTime, Dates.DateTime}">#</a> <strong><code>Ribasim.seconds_since</code></strong> — <em>Method</em>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seconds_since</span>(t<span class="op">::</span><span class="dt">DateTime</span>, t0<span class="op">::</span><span class="dt">DateTime</span>)<span class="op">::</span><span class="dt">Float64</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Convert a DateTime to a float that is the number of seconds since the start of the simulation. This is used to convert between the solver’s inner float time, and the calendar.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/io.jl#LL18-L23" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.set_current_value!-Tuple{NamedTuple, Vector{Int64}, StructArrays.StructVector, Dates.DateTime}" href="#Ribasim.set_current_value!-Tuple{NamedTuple, Vector{Int64}, StructArrays.StructVector, Dates.DateTime}">#</a> <strong><code>Ribasim.set_current_value!</code></strong> — <em>Method</em>.</p>
<p>From a timeseries table <code>time</code>, load the most recent applicable data into <code>table</code>. <code>table</code> must be a NamedTuple of vectors with all variables that must be loaded. The most recent applicable data is non-NaN data for a given ID that is on or before <code>t</code>.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL235-L239" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.set_static_value!-Tuple{NamedTuple, Vector{Int64}, StructArrays.StructVector}" href="#Ribasim.set_static_value!-Tuple{NamedTuple, Vector{Int64}, StructArrays.StructVector}">#</a> <strong><code>Ribasim.set_static_value!</code></strong> — <em>Method</em>.</p>
<p>Load data from a source table <code>static</code> into a destination <code>table</code>. Data is matched based on the node_id, which is sorted.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL217-L220" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.set_table_row!-Tuple{NamedTuple, Any, Int64}" href="#Ribasim.set_table_row!-Tuple{NamedTuple, Any, Int64}">#</a> <strong><code>Ribasim.set_table_row!</code></strong> — <em>Method</em>.</p>
<p>Update <code>table</code> at row index <code>i</code>, with the values of a given row. <code>table</code> must be a NamedTuple of vectors with all variables that must be loaded. The row must contain all the column names that are present in the table. If a value is NaN, it is not set.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL201-L206" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.sorted_table!-Tuple{StructArrays.StructVector{<:Legolas.AbstractRecord}}" href="#Ribasim.sorted_table!-Tuple{StructArrays.StructVector{<:Legolas.AbstractRecord}}">#</a> <strong><code>Ribasim.sorted_table!</code></strong> — <em>Method</em>.</p>
<p>Depending on if a table can be sorted, either sort it or assert that it is sorted.</p>
<p>Tables loaded from GeoPackage into memory can be sorted. Tables loaded from Arrow files are memory mapped and can therefore not be sorted.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/validation.jl#LL283-L288" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.update_basin-Tuple{Any}" href="#Ribasim.update_basin-Tuple{Any}">#</a> <strong><code>Ribasim.update_basin</code></strong> — <em>Method</em>.</p>
<p>Load updates from ‘Basin / time’ into the parameters</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL302" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.update_flow_boundary!-Tuple{Any}" href="#Ribasim.update_flow_boundary!-Tuple{Any}">#</a> <strong><code>Ribasim.update_flow_boundary!</code></strong> — <em>Method</em>.</p>
<p>Load updates from ‘FlowBoundary / time’ into parameters</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL347" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Ribasim.AbstractParameterNode}" href="#Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Ribasim.AbstractParameterNode}">#</a> <strong><code>Ribasim.update_jac_prototype!</code></strong> — <em>Method</em>.</p>
<p>Method for nodes that do not contribute to the Jacobian</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL453-L455" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Ribasim.PidControl}" href="#Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Ribasim.PidControl}">#</a> <strong><code>Ribasim.update_jac_prototype!</code></strong> — <em>Method</em>.</p>
<p>The controlled basin affects itself and the basins upstream and downstream of the controlled pump affect eachother if there is a basin upstream of the pump. The state for the integral term and the controlled basin affect eachother, and the same for the integral state and the basin upstream of the pump if it is indeed a basin.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL522-L527" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Union{Ribasim.LinearResistance, Ribasim.ManningResistance}}" href="#Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Union{Ribasim.LinearResistance, Ribasim.ManningResistance}}">#</a> <strong><code>Ribasim.update_jac_prototype!</code></strong> — <em>Method</em>.</p>
<p>If both the unique node upstream and the unique node downstream of these nodes are basins, then these directly depend on eachother and affect the Jacobian 2x</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL423-L426" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Union{Ribasim.Pump, Ribasim.TabulatedRatingCurve}}" href="#Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Union{Ribasim.Pump, Ribasim.TabulatedRatingCurve}}">#</a> <strong><code>Ribasim.update_jac_prototype!</code></strong> — <em>Method</em>.</p>
<p>If both the unique node upstream and the nodes down stream (or one node further if a fractional flow is in between) are basins, then the downstream basin depends on the upstream basin(s) and affect the Jacobian as many times as there are downstream basins</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/utils.jl#LL480-L484" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.update_tabulated_rating_curve!-Tuple{Any}" href="#Ribasim.update_tabulated_rating_curve!-Tuple{Any}">#</a> <strong><code>Ribasim.update_tabulated_rating_curve!</code></strong> — <em>Method</em>.</p>
<p>Load updates from ‘TabulatedRatingCurve / time’ into the parameters</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/bmi.jl#LL327" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.valid_edges-Tuple{Dictionaries.Dictionary{Tuple{Int64, Int64}, Int64}, Dictionaries.Dictionary{Int64, Tuple{Symbol, Symbol}}}" href="#Ribasim.valid_edges-Tuple{Dictionaries.Dictionary{Tuple{Int64, Int64}, Int64}, Dictionaries.Dictionary{Int64, Tuple{Symbol, Symbol}}}">#</a> <strong><code>Ribasim.valid_edges</code></strong> — <em>Method</em>.</p>
<p>Test for each node given its node type whether the nodes that</p>
<p><strong>are downstream (‘down-edge’) of this node are of an allowed type</strong></p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/validation.jl#LL304-L307" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.valid_n_neighbors-Tuple{Ribasim.Parameters}" href="#Ribasim.valid_n_neighbors-Tuple{Ribasim.Parameters}">#</a> <strong><code>Ribasim.valid_n_neighbors</code></strong> — <em>Method</em>.</p>
<p>Test for each node given its node type whether it has an allowed number of flow inneighbors and flow outneighbors</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL316-L319" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.valid_profiles-Tuple{Dictionaries.Indices{Int64}, Vector{Vector{Float64}}, Vector{Vector{Float64}}}" href="#Ribasim.valid_profiles-Tuple{Dictionaries.Indices{Int64}, Vector{Vector{Float64}}, Vector{Vector{Float64}}}">#</a> <strong><code>Ribasim.valid_profiles</code></strong> — <em>Method</em>.</p>
<p>Check whether the profile data has no repeats in the levels and the areas start at 0.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/validation.jl#LL331-L333" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.config.algorithm-Tuple{Ribasim.config.Solver}" href="#Ribasim.config.algorithm-Tuple{Ribasim.config.Solver}">#</a> <strong><code>Ribasim.config.algorithm</code></strong> — <em>Method</em>.</p>
<p>Create an OrdinaryDiffEqAlgorithm from solver config</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/config.jl#LL154" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.config.snake_case-Tuple{AbstractString}" href="#Ribasim.config.snake_case-Tuple{AbstractString}">#</a> <strong><code>Ribasim.config.snake_case</code></strong> — <em>Method</em>.</p>
<p>Convert a string from CamelCase to snake_case.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/config.jl#LL24" class="documenter-source">source</a><br></p>
<p><a id="Types"></a></p>
<p><a id="Types-1"></a></p>
</section>
<section id="types" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="types"><span class="header-section-number">1.2</span> Types</h2>
<p><a id="Ribasim.Basin" href="#Ribasim.Basin">#</a> <strong><code>Ribasim.Basin</code></strong> — <em>Type</em>.</p>
<p>Requirements:</p>
<ul>
<li>Must be positive: precipitation, evaporation, infiltration, drainage</li>
<li>Index points to a Basin</li>
<li>volume, area, level must all be positive and monotonic increasing.</li>
</ul>
<p>Type parameter C indicates the content backing the StructVector, which can be a NamedTuple of vectors or Arrow Tables, and is added to avoid type instabilities. The node<em>id are Indices to support fast lookup of e.g.&nbsp;current</em>level using ID.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL61-L71" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.Connectivity" href="#Ribasim.Connectivity">#</a> <strong><code>Ribasim.Connectivity</code></strong> — <em>Type</em>.</p>
<p>Store the connectivity information</p>
<p>graph<em>flow, graph</em>control: directed graph with vertices equal to ids flow: store the flow on every flow edge edge<em>ids</em>flow, edge<em>ids</em>control: get the external edge id from (src, dst) edge<em>connection</em>type<em>flow, edge</em>connection<em>types</em>control: get (src<em>node</em>type, dst<em>node</em>type) from edge id</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL4-L11" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.DiscreteControl" href="#Ribasim.DiscreteControl">#</a> <strong><code>Ribasim.DiscreteControl</code></strong> — <em>Type</em>.</p>
<p>node<em>id: node ID of the Control node listen</em>feature<em>id: the ID of the node/edge being condition on variable: the name of the variable in the condition greater</em>than: The threshold value in the condition condition<em>value: The current value of each condition control</em>state: Dictionary: node ID =&gt; (control state, control state start) logic_mapping: Dictionary: (control node ID, truth state) =&gt; control state record: Namedtuple with discrete control information for output</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL264-L273" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.FlowBoundary" href="#Ribasim.FlowBoundary">#</a> <strong><code>Ribasim.FlowBoundary</code></strong> — <em>Type</em>.</p>
<p>node<em>id: node ID of the FlowBoundary node flow</em>rate: target flow rate time: Data of time-dependent flow rates</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL231-L235" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.FractionalFlow" href="#Ribasim.FractionalFlow">#</a> <strong><code>Ribasim.FractionalFlow</code></strong> — <em>Type</em>.</p>
<p>Requirements:</p>
<ul>
<li>from: must be (TabulatedRatingCurve,) node</li>
<li>to: must be (Basin,) node</li>
<li>fraction must be positive.</li>
</ul>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL206-L212" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.LevelBoundary" href="#Ribasim.LevelBoundary">#</a> <strong><code>Ribasim.LevelBoundary</code></strong> — <em>Type</em>.</p>
<p>node<em>id: node ID of the LevelBoundary node level: the fixed level of this ‘infinitely big basin’ The node</em>id are Indices to support fast lookup of level using ID.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL220-L224" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.LinearResistance" href="#Ribasim.LinearResistance">#</a> <strong><code>Ribasim.LinearResistance</code></strong> — <em>Type</em>.</p>
<p>Requirements:</p>
<ul>
<li>from: must be (Basin,) node</li>
<li>to: must be (Basin,) node</li>
</ul>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL150-L155" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.ManningResistance" href="#Ribasim.ManningResistance">#</a> <strong><code>Ribasim.ManningResistance</code></strong> — <em>Type</em>.</p>
<p>This is a simple Manning-Gauckler reach connection.</p>
<ul>
<li>Length describes the reach length.</li>
<li>roughness describes Manning’s n in (SI units).</li>
</ul>
<p>The profile is described by a trapezoid:</p>
<pre><code>     \            /  ^
      \          /   |
       \        /    | dz
bottom  \______/     |
^               &lt;---&gt;
|                 dy
|        &lt;------&gt;
|          width
|
|
+ datum (e.g. MSL)</code></pre>
<p>With <code>profile_slope = dy / dz</code>. A rectangular profile requires a slope of 0.0.</p>
<p>Requirements:</p>
<ul>
<li>from: must be (Basin,) node</li>
<li>to: must be (Basin,) node</li>
<li>length &gt; 0</li>
<li>roughess &gt; 0</li>
<li>profile_width &gt;= 0</li>
<li>profile_slope &gt;= 0</li>
<li>(profile<em>width == 0) xor (profile</em>slope == 0)</li>
</ul>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL163-L195" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.Model" href="#Ribasim.Model">#</a> <strong><code>Ribasim.Model</code></strong> — <em>Type</em>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Model</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    sys<span class="op">::</span><span class="dt">MTK.AbstractODESystem</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    config<span class="op">::</span><span class="dt">Config</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    saved_flow<span class="op">::</span><span class="dt">SavedValues</span>(<span class="dt">Float64</span>, <span class="dt">Vector</span>{<span class="dt">Float64</span>}),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    integrator<span class="op">::</span><span class="dt">SciMLBase.AbstractODEIntegrator</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Struct that combines data from the System and Integrator that we will need during and after model construction.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/lib.jl#LL1-L11" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.Pump" href="#Ribasim.Pump">#</a> <strong><code>Ribasim.Pump</code></strong> — <em>Type</em>.</p>
<p>node<em>id: node ID of the Pump node flow</em>rate: target flow rate control<em>mapping: dictionary from (node</em>id, control_state) to target flow rate</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL243-L247" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.TabulatedRatingCurve" href="#Ribasim.TabulatedRatingCurve">#</a> <strong><code>Ribasim.TabulatedRatingCurve</code></strong> — <em>Type</em>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> TabulatedRatingCurve{C}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Rating curve from level to discharge. The rating curve is a lookup table with linear interpolation in between. Relation can be updated in time, which is done by moving data from the <code>time</code> field into the <code>tables</code>, which is done in the <code>update_tabulated_rating_curve</code> callback.</p>
<p>Type parameter C indicates the content backing the StructVector, which can be a NamedTuple of Vectors or Arrow Primitives, and is added to avoid type instabilities.</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL131-L141" class="documenter-source">source</a><br></p>
<p><a id="Ribasim.Terminal" href="#Ribasim.Terminal">#</a> <strong><code>Ribasim.Terminal</code></strong> — <em>Type</em>.</p>
<p>node_id: node ID of the Terminal node</p>
<p><a target="_blank" href="https://github.com/Deltares/Ribasim.jl/blob/6d22c1a5fe6141cd7593911f17fb82bf9beafb85/core/src/solve.jl#LL257-L259" class="documenter-source">source</a><br></p>
<p><a id="Index"></a></p>
<p><a id="Index-1"></a></p>
</section>
<section id="index" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="index"><span class="header-section-number">1.3</span> Index</h2>
<ul>
<li><a href="../build/index.html#Ribasim.Basin"><code>Ribasim.Basin</code></a></li>
<li><a href="../build/index.html#Ribasim.Connectivity"><code>Ribasim.Connectivity</code></a></li>
<li><a href="../build/index.html#Ribasim.DiscreteControl"><code>Ribasim.DiscreteControl</code></a></li>
<li><a href="../build/index.html#Ribasim.FlowBoundary"><code>Ribasim.FlowBoundary</code></a></li>
<li><a href="../build/index.html#Ribasim.FractionalFlow"><code>Ribasim.FractionalFlow</code></a></li>
<li><a href="../build/index.html#Ribasim.LevelBoundary"><code>Ribasim.LevelBoundary</code></a></li>
<li><a href="../build/index.html#Ribasim.LinearResistance"><code>Ribasim.LinearResistance</code></a></li>
<li><a href="../build/index.html#Ribasim.ManningResistance"><code>Ribasim.ManningResistance</code></a></li>
<li><a href="../build/index.html#Ribasim.Model"><code>Ribasim.Model</code></a></li>
<li><a href="../build/index.html#Ribasim.Pump"><code>Ribasim.Pump</code></a></li>
<li><a href="../build/index.html#Ribasim.TabulatedRatingCurve"><code>Ribasim.TabulatedRatingCurve</code></a></li>
<li><a href="../build/index.html#Ribasim.Terminal"><code>Ribasim.Terminal</code></a></li>
<li><a href="../build/index.html#Ribasim.basin_bottom-Tuple{Ribasim.Basin, Int64}"><code>Ribasim.basin_bottom</code></a></li>
<li><a href="../build/index.html#Ribasim.basin_bottoms-Tuple{Ribasim.Basin, Int64, Int64, Int64}"><code>Ribasim.basin_bottoms</code></a></li>
<li><a href="../build/index.html#Ribasim.config.algorithm-Tuple{Ribasim.config.Solver}"><code>Ribasim.config.algorithm</code></a></li>
<li><a href="../build/index.html#Ribasim.config.snake_case-Tuple{AbstractString}"><code>Ribasim.config.snake_case</code></a></li>
<li><a href="../build/index.html#Ribasim.create_callbacks-Tuple{Any}"><code>Ribasim.create_callbacks</code></a></li>
<li><a href="../build/index.html#Ribasim.create_graph-Tuple{SQLite.DB, String}"><code>Ribasim.create_graph</code></a></li>
<li><a href="../build/index.html#Ribasim.create_storage_tables-Tuple{SQLite.DB, Ribasim.config.Config}"><code>Ribasim.create_storage_tables</code></a></li>
<li><a href="../build/index.html#Ribasim.datetime_since-Tuple{Real, Dates.DateTime}"><code>Ribasim.datetime_since</code></a></li>
<li><a href="../build/index.html#Ribasim.discrete_control_affect!-Tuple{Any, Any}"><code>Ribasim.discrete_control_affect!</code></a></li>
<li><a href="../build/index.html#Ribasim.discrete_control_affect_downcrossing!-Tuple{Any, Any}"><code>Ribasim.discrete_control_affect_downcrossing!</code></a></li>
<li><a href="../build/index.html#Ribasim.discrete_control_affect_upcrossing!-Tuple{Any, Any}"><code>Ribasim.discrete_control_affect_upcrossing!</code></a></li>
<li><a href="../build/index.html#Ribasim.discrete_control_condition-NTuple{4, Any}"><code>Ribasim.discrete_control_condition</code></a></li>
<li><a href="../build/index.html#Ribasim.expand_logic_mapping-Tuple{Dict{Tuple{Int64, String}, String}}"><code>Ribasim.expand_logic_mapping</code></a></li>
<li><a href="../build/index.html#Ribasim.findlastgroup-Tuple{Int64, AbstractVector{Int64}}"><code>Ribasim.findlastgroup</code></a></li>
<li><a href="../build/index.html#Ribasim.findsorted-Tuple{Any, Any}"><code>Ribasim.findsorted</code></a></li>
<li><a href="../build/index.html#Ribasim.formulate!-Tuple{Ribasim.TabulatedRatingCurve, Ribasim.Parameters}"><code>Ribasim.formulate!</code></a></li>
<li><a href="../build/index.html#Ribasim.formulate!-Tuple{Ribasim.LinearResistance, Ribasim.Parameters}"><code>Ribasim.formulate!</code></a></li>
<li><a href="../build/index.html#Ribasim.formulate!-Tuple{AbstractVector{Float64}, Ribasim.Basin, AbstractVector{Float64}, Real}"><code>Ribasim.formulate!</code></a></li>
<li><a href="../build/index.html#Ribasim.formulate!-Tuple{Ribasim.ManningResistance, Ribasim.Parameters}"><code>Ribasim.formulate!</code></a></li>
<li><a href="../build/index.html#Ribasim.get_compressor-Tuple{Ribasim.config.Config}"><code>Ribasim.get_compressor</code></a></li>
<li><a href="../build/index.html#Ribasim.get_fractional_flow_connected_basins-Tuple{Int64, Ribasim.Basin, Ribasim.FractionalFlow, Graphs.SimpleGraphs.SimpleDiGraph{Int64}}"><code>Ribasim.get_fractional_flow_connected_basins</code></a></li>
<li><a href="../build/index.html#Ribasim.get_jac_prototype-Tuple{Ribasim.Parameters}"><code>Ribasim.get_jac_prototype</code></a></li>
<li><a href="../build/index.html#Ribasim.get_level-Tuple{Ribasim.Parameters, Int64}"><code>Ribasim.get_level</code></a></li>
<li><a href="../build/index.html#Ribasim.get_storages_and_levels-Tuple{Ribasim.Model}"><code>Ribasim.get_storages_and_levels</code></a></li>
<li><a href="../build/index.html#Ribasim.get_tstops-Tuple{Any, Dates.DateTime}"><code>Ribasim.get_tstops</code></a></li>
<li><a href="../build/index.html#Ribasim.get_value-Tuple{Ribasim.Parameters, Int64, String, Any}"><code>Ribasim.get_value</code></a></li>
<li><a href="../build/index.html#Ribasim.id_index-Tuple{Dictionaries.Indices{Int64}, Int64}"><code>Ribasim.id_index</code></a></li>
<li><a href="../build/index.html#Ribasim.input_path-Tuple{Ribasim.config.Config, String}"><code>Ribasim.input_path</code></a></li>
<li><a href="../build/index.html#Ribasim.load_data-Tuple{SQLite.DB, Ribasim.config.Config, Type{<:Legolas.AbstractRecord}}"><code>Ribasim.load_data</code></a></li>
<li><a href="../build/index.html#Ribasim.load_structvector-Union{Tuple{T}, Tuple{SQLite.DB, Ribasim.config.Config, Type{T}}} where T<:Tables.AbstractRow"><code>Ribasim.load_structvector</code></a></li>
<li><a href="../build/index.html#Ribasim.nodefields-Tuple{Ribasim.Parameters}"><code>Ribasim.nodefields</code></a></li>
<li><a href="../build/index.html#Ribasim.nodetype-Union{Tuple{Legolas.SchemaVersion{T, N}}, Tuple{N}, Tuple{T}} where {T, N}"><code>Ribasim.nodetype</code></a></li>
<li><a href="../build/index.html#Ribasim.output_path-Tuple{Ribasim.config.Config, String}"><code>Ribasim.output_path</code></a></li>
<li><a href="../build/index.html#Ribasim.parsefile-Tuple{AbstractString}"><code>Ribasim.parsefile</code></a></li>
<li><a href="../build/index.html#Ribasim.profile_storage-Tuple{Vector{Float64}, Vector{Float64}}"><code>Ribasim.profile_storage</code></a></li>
<li><a href="../build/index.html#Ribasim.qh_interpolation-Tuple{Int64, StructArrays.StructVector}"><code>Ribasim.qh_interpolation</code></a></li>
<li><a href="../build/index.html#Ribasim.save_flow-Tuple{Any, Any, Any}"><code>Ribasim.save_flow</code></a></li>
<li><a href="../build/index.html#Ribasim.seconds_since-Tuple{Dates.DateTime, Dates.DateTime}"><code>Ribasim.seconds_since</code></a></li>
<li><a href="../build/index.html#Ribasim.set_current_value!-Tuple{NamedTuple, Vector{Int64}, StructArrays.StructVector, Dates.DateTime}"><code>Ribasim.set_current_value!</code></a></li>
<li><a href="../build/index.html#Ribasim.set_static_value!-Tuple{NamedTuple, Vector{Int64}, StructArrays.StructVector}"><code>Ribasim.set_static_value!</code></a></li>
<li><a href="../build/index.html#Ribasim.set_table_row!-Tuple{NamedTuple, Any, Int64}"><code>Ribasim.set_table_row!</code></a></li>
<li><a href="../build/index.html#Ribasim.sorted_table!-Tuple{StructArrays.StructVector{<:Legolas.AbstractRecord}}"><code>Ribasim.sorted_table!</code></a></li>
<li><a href="../build/index.html#Ribasim.update_basin-Tuple{Any}"><code>Ribasim.update_basin</code></a></li>
<li><a href="../build/index.html#Ribasim.update_flow_boundary!-Tuple{Any}"><code>Ribasim.update_flow_boundary!</code></a></li>
<li><a href="../build/index.html#Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Ribasim.PidControl}"><code>Ribasim.update_jac_prototype!</code></a></li>
<li><a href="../build/index.html#Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Union{Ribasim.LinearResistance, Ribasim.ManningResistance}}"><code>Ribasim.update_jac_prototype!</code></a></li>
<li><a href="../build/index.html#Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Union{Ribasim.Pump, Ribasim.TabulatedRatingCurve}}"><code>Ribasim.update_jac_prototype!</code></a></li>
<li><a href="../build/index.html#Ribasim.update_jac_prototype!-Tuple{SparseArrays.SparseMatrixCSC{Float64, Int64}, Ribasim.Parameters, Ribasim.AbstractParameterNode}"><code>Ribasim.update_jac_prototype!</code></a></li>
<li><a href="../build/index.html#Ribasim.update_tabulated_rating_curve!-Tuple{Any}"><code>Ribasim.update_tabulated_rating_curve!</code></a></li>
<li><a href="../build/index.html#Ribasim.valid_edges-Tuple{Dictionaries.Dictionary{Tuple{Int64, Int64}, Int64}, Dictionaries.Dictionary{Int64, Tuple{Symbol, Symbol}}}"><code>Ribasim.valid_edges</code></a></li>
<li><a href="../build/index.html#Ribasim.valid_n_neighbors-Tuple{Ribasim.Parameters}"><code>Ribasim.valid_n_neighbors</code></a></li>
<li><a href="../build/index.html#Ribasim.valid_profiles-Tuple{Dictionaries.Indices{Int64}, Vector{Vector{Float64}}, Vector{Vector{Float64}}}"><code>Ribasim.valid_profiles</code></a></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../core/equations.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Equations</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>